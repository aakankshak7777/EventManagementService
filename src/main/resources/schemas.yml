components:
  schemas:
    ApiCreateTransactionRequest:
      type: object
      required:
        - transaction
        - channel
        - payer
        - payees
        - idempotenceKey
      properties:
        channel:
          type: string
          example: UPI
        transaction:
          $ref: 'common-schemas.yml#/components/schemas/ApiTransaction'
        idempotenceKey:
          $ref: 'common-schemas.yml#/components/schemas/IdempotenceKey'
        payer:
          $ref: 'common-schemas.yml#/components/schemas/Participant'
        payees:
          type: array
          items:
            type: object
            $ref: 'common-schemas.yml#/components/schemas/Participant'

    ApiReconcileTransactionRequest:
      type: object
      required:
        - transaction
        - channel
        - payer
        - payees
      properties:
        channel:
          type: string
          example: UPI
        transaction:
          $ref: 'common-schemas.yml#/components/schemas/ApiUDIRTransaction'
        idempotenceKey:
          $ref: 'common-schemas.yml#/components/schemas/IdempotenceKey'
        payer:
          $ref: 'common-schemas.yml#/components/schemas/Participant'
        payees:
          type: array
          items:
            type: object
            $ref: 'common-schemas.yml#/components/schemas/Participant'

    ApiUpdateTransactionRequest:
      type: object
      properties:
        transactionId:
          $ref: "common-schemas.yml#/components/schemas/ApiTransactionId"
        accountId:
          $ref: "common-schemas.yml#/components/schemas/ApiAccountId"
        idempotenceKey:
          $ref: "common-schemas.yml#/components/schemas/IdempotenceKey"
        status:
          type: string

    ApiTransactionResponse:
      type: object
      properties:
        success:
          type: boolean
        code:
          type: string
        message:
          type: string
        data:
          $ref: "common-schemas.yml#/components/schemas/ApiTransaction"

    ApiCreateTransactionResponse:
      description: success response
      type: object
      required:
        - code
        - result
      properties:
        result:
          type: string
          enum: [SUCCESS, FAILURE, PARTIAL, DEEMED]
        transaction:
          $ref: "./common-schemas.yml#/components/schemas/ApiTransaction"
        account:
          $ref: './common-schemas.yml#/components/schemas/Account'
        settlementAmount:
          $ref: './common-schemas.yml#/components/schemas/Amount'
        respCode:
          type: string
          description: cbs response code

    ApiGetAccountDetailsResponse:
      description: success response
      type: object
      properties:
        result:
          type: string
          enum: [SUCCESS, NOT_FOUND, FAILED]
        message:
          type: string
        accountDetails:
          $ref: "./common-schemas.yml#/components/schemas/ApiAccountMetadata"

    ApiReconcileTransactionResponse:
      description: success response
      type: object
      required:
        - respCode
        - result
      properties:
        result:
          type: string
          enum: [SUCCESS_ALREADY_CREATED, SUCCESS_CREATED_NOW, REVERSED, FAILURE, UNABLE_TO_UPDATE]
        transaction:
          $ref: "./common-schemas.yml#/components/schemas/ApiUDIRTransaction"
        account:
          $ref: './common-schemas.yml#/components/schemas/Account'
        settlementAmount:
          $ref: './common-schemas.yml#/components/schemas/Amount'
        respCode:
          type: string